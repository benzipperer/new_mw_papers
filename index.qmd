---
title: "Recent Minimum Wage Papers"
format:
  html:
    page-layout: full
execute: 
  echo: FALSE
---

This page displays a list of recent papers on the topic of minimum wage, sourced from the OpenAlex database over the last 12 months. The data is updated daily.

```{r}
#| label: setup
#| include: false
library(readr)
library(reactable)
library(dplyr)
library(htmltools)

min_wage_papers = read_csv("min_wage_papers.csv") |> 
  arrange(desc(publication_date)) |> 
  mutate(publication_date = format(publication_date, "%B %Y")) |> 
  filter(first_retrieved_date >= Sys.Date() - 365)

main_rows = min_wage_papers |> 
  select(authors, publication_date, journal, title)

```

```{r}
#| label: display-table
reactable(
  main_rows,
  columns = list(
    authors = colDef(name = "Authors", cell = function(value) {
      sapply(strsplit(value, "; "), function(authors) {
        paste(sapply(authors, function(author) {
          name_parts <- strsplit(author, " ")[[1]]
          name_parts[length(name_parts)]
        }), collapse = ", ")
      })
    }),
    publication_date = colDef(name = "Publication date"),
    journal = colDef(
      name = "Journal",
      cell = function(value, index) {
        work_url = min_wage_papers$doi[index]
        tags$a(class = "journal-name", href = work_url, target = "_blank", value)
      }
    ),
    title = colDef(name = "Title")
  ),
  pagination = F
)
```
